<div class="product-table mat-elevation-z4">


  <div *ngIf="loading" class="loading-shade">
    <mat-spinner></mat-spinner>
  </div>
  <table mat-table matSort [dataSource]="dataSource">
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
      <td mat-cell *matCellDef="let row">{{ row.name }}</td>
    </ng-container>

    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Description </th>
      <td mat-cell *matCellDef="let row" class="description"
        ><p
          #tooltip
          [matTooltip]="row.description"
          [matTooltipDisabled]="!isEllipsisActive(tooltip)"
          matTooltipPosition="above"
          aria-label="Hover for the whole text of description"
          data-testid="description-text"
        >
          {{ row.description }}</p
        ></td
      >
    </ng-container>

    <ng-container matColumnDef="picture">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Picture Url </th>
      <td mat-cell *matCellDef="let row">
        <div class="picture-url-container">
          <button
            mat-icon-button
            aria-label="Copy Image URL"
            [cdkCopyToClipboard]="row.picture"
            data-testid="copy-picture-url"
          >
            <mat-icon>file_copy</mat-icon>
          </button>
          <p data-testid="picture-url">{{ row.picture }}</p>
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" colspan="3"
        >No data matching the filter "{{ dataSource.filter }}"</td
      >
    </tr>
  </table>
  <mat-paginator
    [length]="totalNumber"
    [pageSize]="10"
    [pageIndex]="pageIndex"
    (page)="pageChange.emit($event.pageIndex)"
  ></mat-paginator>
</div>
